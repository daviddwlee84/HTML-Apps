<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Mini Apps</title>

    <!-- SEO Meta Tags -->
    <meta name="description"
        content="A collection of lightweight single-page HTML apps hosted on GitHub Pages. Explore tools for housing calculations, financial planning, and more." />
    <meta name="author" content="daviddwlee84" />

    <!-- Open Graph / Facebook / Discord -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://daviddwlee84.github.io/HTML-Apps/" />
    <meta property="og:title" content="Mini Apps" />
    <meta property="og:description"
        content="A collection of lightweight single-page HTML apps hosted on GitHub Pages. Explore tools for housing calculations, financial planning, and more." />
    <meta property="og:site_name" content="Mini Apps" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:url" content="https://daviddwlee84.github.io/HTML-Apps/" />
    <meta name="twitter:title" content="Mini Apps" />
    <meta name="twitter:description"
        content="A collection of lightweight single-page HTML apps hosted on GitHub Pages. Explore tools for housing calculations, financial planning, and more." />

    <!-- Theme Color for browser UI -->
    <meta name="theme-color" content="#111827" />
    <style>
        :root {
            --bg: #ffffff;
            --fg: #111111;
            --muted: #6b7280;
            --border: #e5e7eb;
            --hover: #f8fafc;
            --accent: #111827;
            --shadow: 0 6px 20px rgba(0, 0, 0, 0.06);
            --radius: 14px;
            --input-bg: #ffffff;
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            background: var(--bg);
            color: var(--fg);
            font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        }

        .wrap {
            max-width: 980px;
            margin: 48px auto 80px;
            padding: 0 20px;
        }

        header {
            display: grid;
            grid-template-columns: 1fr;
            gap: 14px;
            margin-bottom: 18px;
        }

        .head-row {
            display: flex;
            gap: 14px;
            align-items: baseline;
            justify-content: space-between;
            flex-wrap: wrap;
        }

        .title {
            font-size: 28px;
            font-weight: 700;
            letter-spacing: -0.02em;
            margin: 0;
        }

        .subtitle {
            color: var(--muted);
            font-size: 14px;
            margin-top: 6px;
        }

        .meta {
            color: var(--muted);
            font-size: 12px;
        }

        .search {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .search input {
            width: min(520px, 100%);
            padding: 10px 12px;
            border: 1px solid var(--border);
            border-radius: 10px;
            outline: none;
            background: var(--input-bg);
            font-size: 14px;
        }

        .search input:focus {
            border-color: #cbd5e1;
            box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.04);
        }

        .search .count {
            color: var(--muted);
            font-size: 12px;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 14px;
            margin-top: 12px;
        }

        .card {
            display: block;
            text-decoration: none;
            color: inherit;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 16px 16px 14px;
            background: #fff;
            transition: transform 120ms ease, box-shadow 120ms ease, background 120ms ease, border-color 120ms ease;
            overflow: hidden;
            min-width: 0;
        }

        .card:hover {
            background: var(--hover);
            border-color: #d1d5db;
            box-shadow: var(--shadow);
            transform: translateY(-1px);
        }

        .card-title {
            font-size: 16px;
            font-weight: 650;
            color: var(--accent);
            margin-bottom: 6px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .card-sub {
            font-size: 12px;
            color: var(--muted);
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        /* View Mode Toggle */
        .view-toggle {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            color: var(--muted);
        }

        .view-toggle label {
            cursor: pointer;
            user-select: none;
        }

        .toggle-switch {
            position: relative;
            width: 44px;
            height: 24px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #e5e7eb;
            transition: 0.2s;
            border-radius: 24px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: 0.2s;
            border-radius: 50%;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15);
        }

        .toggle-switch input:checked+.toggle-slider {
            background-color: var(--accent);
        }

        .toggle-switch input:checked+.toggle-slider:before {
            transform: translateX(20px);
        }

        .toggle-switch input:focus+.toggle-slider {
            box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.1);
        }

        /* Framed Mode - Navbar + iframe */
        .frame-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 1000;
            flex-direction: column;
            background: var(--bg);
        }

        .frame-container.active {
            display: flex;
        }

        .frame-navbar {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 16px;
            background: var(--accent);
            color: #fff;
            font-size: 14px;
            flex-shrink: 0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }

        .frame-navbar .nav-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            padding: 6px 12px;
            background: rgba(255, 255, 255, 0.15);
            border: none;
            border-radius: 6px;
            color: #fff;
            font-size: 13px;
            cursor: pointer;
            transition: background 0.15s;
            text-decoration: none;
        }

        .frame-navbar .nav-btn:hover {
            background: rgba(255, 255, 255, 0.25);
        }

        .frame-navbar .nav-title {
            flex: 1;
            font-weight: 600;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .frame-navbar .nav-path {
            font-size: 12px;
            opacity: 0.7;
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
        }

        .app-iframe {
            flex: 1;
            border: none;
            width: 100%;
            height: 100%;
        }

        .empty {
            border: 1px dashed var(--border);
            border-radius: var(--radius);
            padding: 22px;
            color: var(--muted);
            background: #fafafa;
        }

        .empty-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--fg);
            margin-bottom: 6px;
        }

        .empty-sub code {
            background: #fff;
            border: 1px solid var(--border);
            padding: 1px 6px;
            border-radius: 6px;
        }

        .no-match {
            display: none;
            border: 1px dashed var(--border);
            border-radius: var(--radius);
            padding: 18px;
            background: #fafafa;
            color: var(--muted);
            margin-top: 14px;
        }

        footer {
            margin-top: 28px;
            color: var(--muted);
            font-size: 12px;
        }
    </style>
</head>

<body>
    <!-- Frame container for "Framed" mode -->
    <div class="frame-container" id="frameContainer">
        <nav class="frame-navbar">
            <button class="nav-btn" id="navHome" title="Back to Home">
                <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M3 9l5-6 5 6" />
                    <path d="M4 8v7h8V8" />
                </svg>
                Home
            </button>
            <div class="nav-title" id="navTitle">App Name</div>
            <span class="nav-path" id="navPath">apps/example/</span>
            <a class="nav-btn" id="navOpen" href="#" target="_blank" title="Open in new tab">
                <svg width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M7 2H2v10h10V7" />
                    <path d="M9 1h4v4" />
                    <path d="M13 1L6 8" />
                </svg>
                Open
            </a>
        </nav>
        <iframe class="app-iframe" id="appIframe" src="about:blank"></iframe>
    </div>

    <div class="wrap">
        <header>
            <div class="head-row">
                <div>
                    <h1 class="title">Mini Apps</h1>
                    <div class="subtitle">Multiple single-page HTML apps hosted under one GitHub Pages site.</div>
                </div>
                <div class="meta">Generated: 2025-12-11 10:38:51</div>
            </div>

            <div class="search">
                <input id="q" type="search" placeholder="Search apps by name/path..." autocomplete="off" />
                <span class="count" id="count"></span>
            </div>

            <div class="view-toggle">
                <span>Full Page</span>
                <label class="toggle-switch">
                    <input type="checkbox" id="viewMode" />
                    <span class="toggle-slider"></span>
                </label>
                <span>Framed</span>
                <span style="margin-left: 4px; font-size: 11px; opacity: 0.7;"
                    title="Framed mode keeps a navigation bar visible so you can easily return home">(ℹ️)</span>
            </div>
        </header>

        <main>
            <div class="grid" id="grid">
                <a class="card" href="./apps/fire/" data-search="fire apps/fire/ fire">
                    <div class="card-title">Fire</div>
                    <div class="card-sub">apps/fire/</div>
                </a>
                <a class="card" href="./apps/housing_npv/" data-search="housing npv apps/housing_npv/ housing_npv">
                    <div class="card-title">Housing Npv</div>
                    <div class="card-sub">apps/housing_npv/</div>
                </a>
                <a class="card" href="./apps/housing_price_calculation/"
                    data-search="housing price calculation apps/housing_price_calculation/ housing_price_calculation">
                    <div class="card-title">Housing Price Calculation</div>
                    <div class="card-sub">apps/housing_price_calculation/</div>
                </a>
            </div>
            <div class="no-match" id="nomatch">
                No matching apps. Try a different keyword.
            </div>
        </main>

        <footer>
            <div>Rules: apps live in <code>apps/&lt;app-name&gt;/index.html</code>, use relative asset paths only.</div>
            <div>Local dev: <code>python -m http.server 8000</code></div>
            <div>Generator: <code>python tools/gen_index.py</code> | Scaffold:
                <code>python tools/new_app.py &lt;name&gt; --update-index</code>
            </div>
        </footer>
    </div>

    <script>
        (function () {
            // === Search functionality ===
            const input = document.getElementById("q");
            const grid = document.getElementById("grid");
            const cards = Array.from(grid.querySelectorAll(".card"));
            const count = document.getElementById("count");
            const nomatch = document.getElementById("nomatch");

            function updateSearch() {
                const q = (input.value || "").trim().toLowerCase();
                let visible = 0;

                for (const c of cards) {
                    const hay = c.getAttribute("data-search") || "";
                    const ok = !q || hay.includes(q);
                    c.style.display = ok ? "" : "none";
                    if (ok) visible++;
                }

                if (cards.length > 0) {
                    count.textContent = visible + " / " + cards.length;
                    nomatch.style.display = visible === 0 ? "block" : "none";
                } else {
                    count.textContent = "";
                    nomatch.style.display = "none";
                }
            }

            input.addEventListener("input", updateSearch);
            updateSearch();

            // === View Mode Toggle (Full Page vs Framed) ===
            const STORAGE_KEY = "miniapps_view_mode";
            const viewModeToggle = document.getElementById("viewMode");
            const frameContainer = document.getElementById("frameContainer");
            const appIframe = document.getElementById("appIframe");
            const navTitle = document.getElementById("navTitle");
            const navPath = document.getElementById("navPath");
            const navOpen = document.getElementById("navOpen");
            const navHome = document.getElementById("navHome");

            // Load saved preference
            function loadViewMode() {
                const saved = localStorage.getItem(STORAGE_KEY);
                viewModeToggle.checked = saved === "framed";
            }

            // Save preference
            function saveViewMode() {
                localStorage.setItem(STORAGE_KEY, viewModeToggle.checked ? "framed" : "fullpage");
            }

            viewModeToggle.addEventListener("change", saveViewMode);
            loadViewMode();

            // Check if we're in framed mode
            function isFramedMode() {
                return viewModeToggle.checked;
            }

            // Open app in frame
            function openInFrame(href, title, path) {
                navTitle.textContent = title;
                navPath.textContent = path;
                navOpen.href = href;
                appIframe.src = href;
                frameContainer.classList.add("active");
                document.body.style.overflow = "hidden";
            }

            // Close frame and go home
            function closeFrame() {
                frameContainer.classList.remove("active");
                appIframe.src = "about:blank";
                document.body.style.overflow = "";
            }

            // Home button click
            navHome.addEventListener("click", function (e) {
                e.preventDefault();
                closeFrame();
            });

            // Handle card clicks
            for (const card of cards) {
                card.addEventListener("click", function (e) {
                    if (isFramedMode()) {
                        e.preventDefault();
                        const href = card.getAttribute("href");
                        const title = card.querySelector(".card-title").textContent;
                        const path = card.querySelector(".card-sub").textContent;
                        openInFrame(href, title, path);
                    }
                    // else: default behavior (navigate to app)
                });
            }

            // ESC key to close frame
            document.addEventListener("keydown", function (e) {
                if (e.key === "Escape" && frameContainer.classList.contains("active")) {
                    closeFrame();
                }
            });

            // Handle browser back button when frame is open
            window.addEventListener("popstate", function () {
                if (frameContainer.classList.contains("active")) {
                    closeFrame();
                }
            });
        })();
    </script>
</body>

</html>